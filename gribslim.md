# gribslim プログラム
GRIB2 のファイルの一部を抽出するプログラム
# 書式
gribslim [-a][-fFILTER][-oFILENAME] FILES ...
# 説明
gribslim は入力 FILES を読み取り、一部を抽出してひとつの GRIB2 をファイル distilled.bin (または -o オプションで指定したファイル名) に書き出します。
# オプション
## -oFILENAME
出力ファイル名を指定します（デフォルトはdistilled.bin）。
## -fFILTER
FILTER 文字列で指定される一部だけを出力します（文法は後述）。
## -a
入力の全部を出力します。
オプション -a も -f も指定されない場合は歴史的経緯互換モードです（後述）。
# 用例
たぶん難しいので用例を先に書きます。

# フィルタ言語
フィルタ言語は原則1語1文字の逆ポーランド記法です。データ型は倍精度浮動小数点数しかありません。
入力GRIBのデータ節（第7節）がデコードされるたびに毎回フィルタ言語が解釈され、終わった後のスタックトップが真（非零）になったものが出力されます。
## 置数
以下のコマンド群はいずれも、スタックになんらかの数値をプッシュして、以前のスタックトップ以下は2番目以下に繰り下げられます。
### d
積算時間（duration）を分単位であらわした数値をスタックトップに置きます。
### f
予報時間（forecast time）を分単位であらわした数値をスタックトップに置きます。
### g
予報時間と積算時間の合計を、分単位であらわした数値をスタックトップに置きます。
### p
パラメタを特定する整数値（(discipline*256+category)*256+parameter）をスタックトップに置きます。
### v
鉛直面の位置（気圧ならば Pa 単位）をスタックトップに置きます。
### x_十六進数_
x があると、引き続く16進数字列のあらわす整数値がスタックトップに置かれます。
### 浮動小数点値
0～9 またはマイナスで始まる浮動小数点数字列（strtod(3)で認識されるもの）があればその値がスタックトップに置かれます。
### [名前]
パラメタ名や鉛直面名を数字で指定しなくても済みます。
パラメタ名は T,RAIN などが認識されます。
鉛直面名は SURF,MSL,2m,10m が認識されます。
認識できない名前は NaN がスタックトップに置かれます。
### :
スタックトップと同じ値を置きます。
## 演算子
### & または K
and 演算子です。
### | または A
or 演算子です。
### = または E
比較演算子です。
### < または L
比較演算子です。
### > または G
比較演算子です。
## その他
### ,
コンマ文字は無視されます。
# 歴史的経緯互換モード
あとで書きます。
# バグ
複数入力ファイルがあると最後のものが残ります。
